<!DOCTYPE html>
<html>
<head>
    <title>&pi;</title>

    <script src="https://code.jquery.com/jquery-3.2.1.min.js" integrity="sha256-hwg4gsxgFZhOsEEamdOYGBf13FyQuiTwlAQgxVSNgt4=" crossorigin="anonymous"></script>
    
    <script type="text/javascript" src="js/dygraph-combined.min.js"></script>

    <style type="text/css">
        #chart {
            width: 700px;
            height: 400px;
            margin: 0 auto;
        }
    </style>
</head>

<body>
    <div id="chart"></div>

    <div class="pi" id="Basel"></div>
    <div class="pi" id="GregoryLeibniz"></div>
    <div class="pi" id="Nilakantha"></div>
    <div class="pi" id="Ramanujan"></div>
    
    <script>
    var fact = function (x) {
       if (x == 0) {
          return 1;
       }
       return x*fact(x-1);
    };

    var series = {
        Basel: {
            name: "Basel",
            x: 0,
            x0: 0,
            term: function (x, k) {
                k++;
                return x + 1./(k*k);
            },
            result: function (x) {
                return Math.sqrt(6*x);
            },
            maxit: Infinity
        },
        GregoryLeibniz: {
            name: "Gregory-Leibniz",
            x: 0,
            x0: 0,
            term: function (x, k) {
                return x + Math.pow(-1,k)*4./(2*k+1);
            },
            result: function (x) {
                return x;
            },
            maxit: Infinity
        },
        Nilakantha: {
            name: "Nilakantha",
            x: 3.,
            x0: 3.,
            term: function (x, k) {
                k++;
                return x - Math.pow(-1,k)*4./(2.*k*(2.*k+1.)*(2.*k+2.))
            },
            result: function (x) {
                return x;
            },
            maxit: Infinity
        },
        Ramanujan: {
            name: "Ramanujan",
            x: 0,
            x0: 0,
            term: function (x, k) {
                return x + fact(4*k)*(1103. + 26390*k)/(Math.pow(fact(k),4)*Math.pow(396, 4*k))
            },
            result: function (x) {
                return 9801./(2*Math.sqrt(2.)*x);
            },
            maxit: 4
        }
    };

    labels = ["Iteration"];
    $.each(series, function(i, method) {
        labels.push(method.name);
    });

    maxit = 50;
    data = []
    for (k = 0; k < maxit; ++k){
        row = [k];
        $.each(series, function(i, method) {
            if (k < method.maxit) {
                method.x = method.term(method.x, k)
                row.push(method.result(method.x))
            } else {
                row.push(null);
            }
        });
        data.push(row);
    }

    var graph = new Dygraph($("#chart")[0], data,
        {
            labels: labels,
            xlabel: 'Iteration',
            ylabel: '&pi;'
        });

    $.each($("div.pi"), function (i, el) {
        var method = series[$(el).attr("id")];
        $(el).append($("<h3>").html(method.name));

        var n = Math.min(maxit, method.maxit);
        method.x = method.x0;
        for (k = 0; k < n; ++k){
            method.x = method.term(method.x, k)
            $(el).append(method.result(method.x) + "; ");
        }
    });
    </script>
</body>
</html>